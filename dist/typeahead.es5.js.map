{"version":3,"file":"typeahead.es5.js","sources":["../src/ui-menu/ui-menu.ts","../src/ui-typeahead/style/typeahead.ts","../src/ui-typeahead/ui-typeahead.ts"],"sourcesContent":["interface MenuItem {\r\n    id:string;\r\n    label:string;\r\n    callback: Function;\r\n}\r\ninterface MenuEventDetail {\r\n    items:MenuItem[],\r\n    relativeElement:HTMLElement,\r\n    options: MenuOptions,\r\n}\r\ninterface MenuStateInterface {\r\n    isShowing:boolean;\r\n    mouseX: number;\r\n    mouseY: number;\r\n}\r\ninterface MenuOptions {\r\n    height:string;\r\n}\r\nclass MenuComponent {\r\n    public static MENU_ID = 'ui-menu';\r\n    public static EVENTS = {\r\n        OPEN_MENU: 'OPEN_MENU'\r\n    };\r\n    private options: MenuOptions;\r\n    private optionList: MenuItem[];\r\n    private relativeElement: HTMLElement | null;\r\n    private state: MenuStateInterface;\r\n    private resizeHandler: EventListenerOrEventListenerObject; \r\n    private openMenuHandler: EventListenerOrEventListenerObject; \r\n    private menuClickedHandler: EventListenerOrEventListenerObject; \r\n    private mouseClickHandler: EventListenerOrEventListenerObject; \r\n    private mouseMoveHandler: EventListenerOrEventListenerObject; \r\n\r\n    constructor() {\r\n        this.optionList = [];\r\n        this.state = {\r\n            isShowing: false,\r\n            mouseX:0,\r\n            mouseY:0,\r\n        }\r\n        this.options = {\r\n            height: '100px',\r\n        };\r\n        this.relativeElement = null;\r\n        this.resizeHandler = this.onResize.bind(this);\r\n        this.openMenuHandler = this.openMenu.bind(this) as EventListenerOrEventListenerObject;\r\n        this.menuClickedHandler = this.onMenuClicked.bind(this) as EventListenerOrEventListenerObject;\r\n        this.mouseClickHandler = this.onMouseClick.bind(this) as EventListenerOrEventListenerObject;\r\n        this.mouseMoveHandler = this.onMouseMove.bind(this) as EventListenerOrEventListenerObject;\r\n\r\n        document.addEventListener('DOMContentLoaded', this.onDomLoaded.bind(this));\r\n    }\r\n    private onDomLoaded(){\r\n        this.createMenu();\r\n    }\r\n    private createMenu() {\r\n        let menu = document.querySelector(`#${MenuComponent.MENU_ID}`);\r\n        if(!menu) {\r\n            const styleElement = document.createElement('style');\r\n            menu = document.createElement('div');\r\n            menu.id = MenuComponent.MENU_ID;\r\n            styleElement.innerHTML = this.getStyle();\r\n            menu.innerHTML = this.getTemplate();\r\n            document.body.appendChild(styleElement);\r\n            document.body.appendChild(menu);\r\n        }\r\n        \r\n        document.body.addEventListener(MenuComponent.EVENTS.OPEN_MENU, this.openMenuHandler);\r\n        document.body.addEventListener('click', this.mouseClickHandler);\r\n        document.body.addEventListener('mousemove', this.mouseMoveHandler);\r\n    }\r\n    private onMouseMove(event : MouseEvent){\r\n        if (event.pageX)\r\n        {\r\n            this.state.mouseX = event.pageX;\r\n            this.state.mouseY = event.pageY;\r\n        }\r\n        else\r\n        {\r\n            this.state.mouseX = (window.event as any).x + document.body.scrollLeft - 2;\r\n            this.state.mouseY = (window.event as any).y + document.body.scrollTop - 2;\r\n        }\r\n    }\r\n    private onMouseClick(event: MouseEvent){\r\n        let menu = document.querySelector(`#${MenuComponent.MENU_ID}`);\r\n        if(menu && this.relativeElement && this.isMouseOutOfElement(menu) &&  this.isMouseOutOfElement(this.relativeElement) || menu && !this.relativeElement && this.isMouseOutOfElement(menu)) {\r\n            this.hideMenu();\r\n        }\r\n        \r\n    }\r\n    private isMouseOutOfElement(element: Element) : boolean{\r\n        const rect: DOMRect = element.getBoundingClientRect() as DOMRect;\r\n        const offsetY = (element as HTMLElement).offsetTop;\r\n        const offsetX = (element as HTMLElement).offsetLeft;\r\n        return this.state.mouseX > (rect.width + offsetX) || this.state.mouseX < (offsetX) || this.state.mouseY > (rect.height + offsetY) || this.state.mouseY < (offsetY);\r\n    }\r\n    private openMenu(event : CustomEvent){\r\n        let menu = document.querySelector(`#${MenuComponent.MENU_ID}`) as HTMLElement;\r\n        const detail: MenuEventDetail = event.detail;\r\n        this.options = {\r\n            height: '',\r\n        };\r\n        if(menu && detail.items) {\r\n            if(this.optionList !== detail.items) { \r\n                this.optionList = detail.items;\r\n                this.options = detail.options;\r\n                this.relativeElement = detail.relativeElement;\r\n                const listHolder = menu.querySelector('.ui-list-holder');\r\n                if(listHolder)listHolder.innerHTML = this.getMenuList();\r\n            }\r\n            if(!menu.classList.contains('show')) {\r\n                this.state.isShowing = true;\r\n                menu.style.height = this.options && this.options.height ? this.options.height: '';\r\n                menu.classList.add('show');\r\n                const listHolder = menu.querySelector('.ui-list-holder');\r\n                if(listHolder)listHolder.addEventListener('click', this.menuClickedHandler);\r\n                window.addEventListener('resize', this.resizeHandler);\r\n            }\r\n            this.positionMenu();\r\n        }\r\n    }\r\n    private onMenuClicked(event : MouseEvent){\r\n        const id = event.srcElement ? (event.srcElement as HTMLElement).getAttribute('option-list-id'): null;\r\n        const item = this.optionList.find(option => option.id == id);\r\n        if(item){\r\n            if(item.callback)item.callback(item);\r\n        }\r\n        this.hideMenu();\r\n    }\r\n    private hideMenu(){\r\n        window.removeEventListener('resize', this.resizeHandler);\r\n        this.reset();\r\n        let menu = document.querySelector(`#${MenuComponent.MENU_ID}`);\r\n        if(menu){\r\n            const listHolder = menu.querySelector('.ui-list-holder');\r\n            if(listHolder)listHolder.removeEventListener('click', this.menuClickedHandler);\r\n            menu.classList.remove('show');\r\n        }\r\n    }\r\n    private reset(){\r\n        this.state.isShowing = false;\r\n        this.relativeElement = null;\r\n        this.optionList = [];\r\n    }\r\n    private positionMenu(){\r\n        let menu = document.querySelector(`#${MenuComponent.MENU_ID}`) as HTMLElement;\r\n        if(menu && this.relativeElement) {\r\n            const rect: DOMRect = this.relativeElement.getBoundingClientRect() as DOMRect;\r\n            const viewPortHeight = window.innerHeight;\r\n            menu.style.width = rect.width + 'px'; \r\n            const menuRect: DOMRect = menu.getBoundingClientRect() as DOMRect;\r\n\r\n            menu.style.left = this.relativeElement.offsetLeft + 'px';\r\n\r\n            if(rect.bottom + menuRect.height > viewPortHeight) {\r\n                menu.style.top = (this.relativeElement.offsetTop - menuRect.height) + 'px';\r\n            }else{\r\n                menu.style.top = (this.relativeElement.offsetTop + rect.height) + 'px';\r\n            }\r\n        }else if(menu){\r\n            menu.style.top = this.state.mouseY + 'px';\r\n            menu.style.left = this.state.mouseX + 'px';\r\n        }\r\n    }\r\n    private onResize(){\r\n        if(this.state.isShowing) {\r\n            this.positionMenu();\r\n        }\r\n    }\r\n    private getStyle() {\r\n        return `\r\n            #${MenuComponent.MENU_ID} {\r\n                font-family: Helvetica, Arial, sans-serif;\r\n                font-family: var(--ui-menu-font-family, Helvetica, Arial, sans-serif);\r\n                position:absolute;\r\n                padding: 10px;\r\n                padding: var(--ui-menu-padding, 10px);\r\n                border: 1px solid #333;\r\n                display:none;\r\n                box-sizing: border-box;\r\n                background-color:white;\r\n                background-color:var(--ui-menu-bg-color, white);\r\n                z-index:99999;\r\n                overflow:auto;\r\n            }\r\n            #${MenuComponent.MENU_ID}.show {\r\n                display:block;\r\n            }\r\n            #${MenuComponent.MENU_ID} .ui-list-holder div {\r\n                cursor: pointer;\r\n            }\r\n            #${MenuComponent.MENU_ID} .ui-list-holder div:hover {\r\n                background-color: #ccc;\r\n            }\r\n\r\n            `;\r\n    }\r\n    private getMenuList()\r\n    {\r\n        let template = ``;\r\n        this.optionList\r\n        .forEach((item, index)=>{\r\n            template += `\r\n            <div option-list-id=\"${item.id !== undefined ? item.id : index}\">\r\n                ${item.label}\r\n            </div>\r\n            `\r\n        });\r\n        return template;\r\n    }\r\n    private getTemplate() {\r\n        return `\r\n            <div class=\"ui-list-holder\">\r\n            <div>\r\n        `;\r\n    }\r\n}\r\n(window as any).UIComponents = {...(window as any).UIComponents,  menuComponent: new MenuComponent()} ","export const TypeAHeadStyle = ()=>{\r\n    const margin = '5px';\r\n        return `\r\n            ui-typeahead {\r\n                display:inline-block;\r\n                font-family: Helvetica, Arial, sans-serif;\r\n            }\r\n            :host {\r\n                display:inline-block;\r\n                font-family: Helvetica, Arial, sans-serif;\r\n            }\r\n            .wrapper {\r\n                display: flex;\r\n                border:1px solid #333;\r\n                flex-wrap: wrap;\r\n                position: relative;\r\n                padding-right: 1.5rem;\r\n                background-color: white;\r\n                background-color: var(--typeahead-bg-color,white);\r\n            }\r\n            .pill {\r\n                border-radius: 0.2rem;\r\n                border-radius: var(--pill-border-radius,0.2rem);\r\n                background-color: #999;\r\n                background-color: var(--pill-bg-color,#999);\r\n                color: white;\r\n                color: var(--pill-color,white);\r\n                padding: 0.3rem 0.5rem;\r\n                padding: var(--pill-padding,0.3rem 0.5rem);\r\n                margin-top: 0.2rem;\r\n                margin-top: var(--pill-margin-top,0.2rem);\r\n                margin-bottom: 0.2rem;\r\n                margin-bottom: var(--pill-margin-bottom,0.2rem);\r\n                margin-left: 0.2rem;\r\n                margin-left: var(--pill-margin-left,0.2rem);\r\n                display: inline-block;\r\n                margin-right: 0.2rem;\r\n                margin-right: var(--pill-margin-right,0.2rem);\r\n                font-size: 0.75rem;\r\n                font-size: var(--pill-font-size,0.75rem);\r\n                cursor:pointer;\r\n            }\r\n            .pill:not(.active):hover {\r\n                background-color: #666;\r\n                background-color: var(--pill-hover-bg-color,#666);\r\n            }\r\n            .pill.active {\r\n                background-color: #333;\r\n                background-color: var(--pill-active-bg-color,#333);\r\n                color: white;\r\n                color: var(--pill-active-color,white);\r\n            }\r\n            .pill span {\r\n                display: inline-block;\r\n                padding: 0 0.2rem;\r\n            }\r\n            input {\r\n                display: inline-block;\r\n                flex: 1;\r\n                border: none;\r\n                min-width:2rem;\r\n                margin:${margin};\r\n            }\r\n            input:focus {\r\n                outline:none;\r\n            }\r\n            span.close {\r\n                position: absolute;\r\n                right: 0.5rem;\r\n                top: 50%;\r\n                transform: translateY(-50%);\r\n                font-size: 0.8rem;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                color: #333;\r\n                color: var(--typeahead-close-color,#333);\r\n                cursor: pointer;\r\n                display: none;\r\n            }\r\n            span.close:hover {\r\n                color: #999;\r\n                color: var(--typeahead-close-color,#999);\r\n            }\r\n            span.close.show {\r\n                display: block;\r\n            }\r\n            `;\r\n}","import {TypeAHeadStyle} from './style/typeahead';\r\n\r\ninterface TypeAHeadItem {\r\n    label:string;\r\n    id: string | number;\r\n} \r\ninterface TypeAHeadOptions {\r\n    menuHeight:string;\r\n}\r\nclass TypeAHeadComponent extends HTMLElement {\r\n    public static get observedAttributes(): string[] {\r\n        return ['option-list' ,'selected-list', 'options'];\r\n    }\r\n    public static EVENTS = {\r\n        ON_CHANGE: 'TYPEAHEAD_ON_CHANGE',\r\n    }\r\n    private optionList: TypeAHeadItem[];\r\n    private selectedList: TypeAHeadItem[];\r\n    private options: TypeAHeadOptions;\r\n    private element: HTMLElement;\r\n    private styleElement: HTMLStyleElement;\r\n    constructor() {\r\n        super();\r\n        this.optionList = [];\r\n        this.selectedList = [];\r\n        this.options = {\r\n            menuHeight: '200px',\r\n        }\r\n        this.element = document.createElement('div');\r\n        this.styleElement = document.createElement('style');\r\n    }\r\n    public setList(value: any ){\r\n        this.setProp('optionList',value);\r\n    }\r\n    public setSelected(value: any ){\r\n       this.setProp('selectedList',value);\r\n    }\r\n    public setOptions(value: any ){\r\n        this.setProp('options',value);\r\n     }\r\n    private setProp(prop:string, value:any){\r\n        if(!value) return;\r\n        (this as any)[prop] = (typeof value == 'string') ?  JSON.parse(value): value;\r\n        this.render();\r\n    }\r\n    public connectedCallback() {\r\n        const shadow = this.attachShadow({ mode: 'open' });\r\n        shadow.appendChild(this.styleElement);\r\n        shadow.appendChild(this.element);\r\n\r\n        this.styleElement.innerHTML = TypeAHeadStyle();\r\n        this.element.classList.add('wrapper');\r\n        this.element.innerHTML = this.getTemplate();\r\n        this.render(true);\r\n        this.element.addEventListener('click',this.onParentfocus.bind(this) as EventListenerOrEventListenerObject)\r\n    }\r\n    public attributeChangedCallback(name: string, oldValue: string, newValue: string) {\r\n        switch (name) {\r\n            case 'option-list':\r\n                this.setList(newValue);\r\n            break;\r\n            case 'selected-list':\r\n                this.setSelected(newValue);\r\n            break;\r\n            case 'options':\r\n                this.setOptions(newValue);\r\n            break;\r\n        }\r\n    }\r\n\r\n    private render(isFirstTime?:boolean){\r\n        if(!isFirstTime) this.dispatchOnChange();\r\n        this.element.innerHTML = this.getTemplate();\r\n        const closeButton = this.element.querySelector('.close') as HTMLElement;\r\n        if(this.selectedList.length){\r\n            closeButton.classList.add('show');\r\n        }else{\r\n            closeButton.classList.remove('show');\r\n        }\r\n        const input = this.element.querySelector('input') as HTMLElement;\r\n        input.addEventListener('keyup',this.onInputKey.bind(this));\r\n        input.addEventListener('click',this.onInputKey.bind(this) as EventListenerOrEventListenerObject);\r\n        closeButton.addEventListener('click',this.onClearAllSelected.bind(this));\r\n        this.element.querySelectorAll('.pill span').forEach((closeButton)=>closeButton.addEventListener('click',this.onPillClick.bind(this) as EventListenerOrEventListenerObject));\r\n    }\r\n    private onPillClick(event : MouseEvent){\r\n        const index = (event.currentTarget as HTMLElement).getAttribute('pill-id');\r\n        this.selectedList.splice(Number(index), 1);\r\n        this.render();\r\n    }\r\n    private onClearAllSelected() {\r\n        this.selectedList = [];\r\n        this.render();\r\n    }\r\n    private onInputKey(event: KeyboardEvent){\r\n        const customEvent = new CustomEvent('OPEN_MENU',{\r\n            detail:{\r\n                items: this.getMenuItems(),\r\n                relativeElement: this,\r\n                options: {\r\n                    height: this.options && this.options.menuHeight ? this.options.menuHeight : '',\r\n                }\r\n            }\r\n        })\r\n        document.body.dispatchEvent(customEvent);\r\n    }\r\n    private dispatchOnChange(){\r\n        const customEvent = new CustomEvent(TypeAHeadComponent.EVENTS.ON_CHANGE,{\r\n            detail:{\r\n                selectedItems: [...this.selectedList],\r\n            }\r\n        })\r\n        this.dispatchEvent(customEvent);\r\n    }\r\n    \r\n    private onParentfocus(event: FocusEvent){\r\n        (this.element.querySelector('input') as HTMLElement).focus();\r\n    }\r\n    private getMenuItems(): any[]{\r\n        const value =  (this.element.querySelector('input') as HTMLInputElement).value.toLowerCase();\r\n        let options = !value ? this.optionList\r\n        .filter(item=> !this.selectedList.find(sItem => item.id == sItem.id))\r\n        : this.optionList.filter(item=> !this.selectedList.find(sItem => item.id == sItem.id) && item.label.toLowerCase().indexOf(value) >= 0 )\r\n        .map(item => {return {...item, label: item.label.replace(new RegExp(`${value}`,'igm'),`<strong>${value}</strong>`)}});\r\n        if(!options.length)options.push({\r\n            label: 'No matches found.',\r\n            id: 0,\r\n        })\r\n        return options.map(item => {return {...item, callback:this.onMenuItemClicked.bind(this)}});\r\n    }\r\n    private onMenuItemClicked(selectedItem: TypeAHeadItem){\r\n        this.selectedList.push(this.optionList.find(item => item.id == selectedItem.id) as TypeAHeadItem);\r\n        this.render();\r\n        (this.element.querySelector('input') as HTMLElement).focus();\r\n    }\r\n    private  getPillTemplate(name: string, index:number){\r\n        return `\r\n            <div class=\"pill\">\r\n                ${name}\r\n                <span pill-id=\"${index}\">x</span>\r\n            </div>\r\n        `;\r\n    }\r\n    private getPillList(){\r\n        let template = ``;\r\n        this.selectedList.forEach((item, index)=>{\r\n            template += this.getPillTemplate(item.label, index);\r\n        });\r\n        return template;\r\n    }\r\n    private getTemplate() {\r\n        return `\r\n            ${this.getPillList()}\r\n            <input>\r\n            <span class=\"close\">x</span>\r\n        `;\r\n    }\r\n}\r\ncustomElements.define('ui-typeahead', TypeAHeadComponent);"],"names":["tslib_1.__extends"],"mappings":"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"}